<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Buchungskalender</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Buchungskalender</h2>
  <div id="calendar"></div>

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script>

    document.addEventListener('DOMContentLoaded', function () {
      const calendarEl = document.getElementById('calendar');
      const calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        locale: 'de',
        selectable: true,
        events: 'http://localhost:8082/belegte-daten.php',
        dateClick: function(info) {console.log(info);
          const today = new Date();
          today.setHours(0, 0, 0, 0);
          if (info.date < today) {
            alert("Dieser Tag liegt in der Vergangenheit.");
            return;
          }
          const isBlocked = calendar.getEvents().some(ev => ev.startStr === info.dateStr);
          if (isBlocked) {
            alert("Dieser Tag ist bereits belegt.");
          } else {
           window.location.href = 'http://localhost:8082/buchen.php?start_datum=' + info.dateStr + '&end_datum=' + info.dateStr;
           
          }
        },
        select: function(info) {
          alert('selected ' + info.startStr + ' to ' + info.endStr);
          window.location.href = 'http://localhost:8082/buchen.php?start_datum=' + info.startStr + '&end_datum=' + info.endStr;
        }
      });
      calendar.render();
    });
/*
    document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');

    var calendar = new FullCalendar.Calendar(calendarEl, {
      selectable: true,
      locale: 'de',
      events: 'http://localhost:8082/belegte-daten.php',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay'
      },
      dateClick: function(info) {
        alert('clicked ' + info.dateStr);
      },
      select: function(info) {
        alert('selected ' + info.startStr + ' to ' + info.endStr);
      }
    });

    calendar.render();
  });
  */
</script>
</body>
</html>